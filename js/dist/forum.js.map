{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regenerator.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/OverloadYield.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/regenerator/index.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorDefine.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorValues.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorKeys.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/regeneratorAsync.js","webpack://@jiushutech/flarum-dingtalk-login/webpack/bootstrap","webpack://@jiushutech/flarum-dingtalk-login/webpack/runtime/compat get default export","webpack://@jiushutech/flarum-dingtalk-login/webpack/runtime/define property getters","webpack://@jiushutech/flarum-dingtalk-login/webpack/runtime/hasOwnProperty shorthand","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['forum/app']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/extend']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@jiushutech/flarum-dingtalk-login/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/Component']\"","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/components/Button']\"","webpack://@jiushutech/flarum-dingtalk-login/./src/forum/components/DingtalkLoginButton.tsx","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@jiushutech/flarum-dingtalk-login/./src/forum/components/DingtalkBindButton.tsx","webpack://@jiushutech/flarum-dingtalk-login/./src/forum/components/DingtalkH5Auth.tsx","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@jiushutech/flarum-dingtalk-login/./src/forum/components/DingtalkBindRequiredModal.tsx","webpack://@jiushutech/flarum-dingtalk-login/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@jiushutech/flarum-dingtalk-login/./src/forum/components/DingtalkIndexCard.tsx","webpack://@jiushutech/flarum-dingtalk-login/./forum.ts"],"sourcesContent":["var OverloadYield = require(\"./OverloadYield.js\");\nvar regenerator = require(\"./regenerator.js\");\nvar regeneratorAsync = require(\"./regeneratorAsync.js\");\nvar regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nvar regeneratorKeys = require(\"./regeneratorKeys.js\");\nvar regeneratorValues = require(\"./regeneratorValues.js\");\nfunction _regeneratorRuntime() {\n  \"use strict\";\n\n  var r = regenerator(),\n    e = r.m(_regeneratorRuntime),\n    t = (Object.getPrototypeOf ? Object.getPrototypeOf(e) : e.__proto__).constructor;\n  function n(r) {\n    var e = \"function\" == typeof r && r.constructor;\n    return !!e && (e === t || \"GeneratorFunction\" === (e.displayName || e.name));\n  }\n  var o = {\n    \"throw\": 1,\n    \"return\": 2,\n    \"break\": 3,\n    \"continue\": 3\n  };\n  function a(r) {\n    var e, t;\n    return function (n) {\n      e || (e = {\n        stop: function stop() {\n          return t(n.a, 2);\n        },\n        \"catch\": function _catch() {\n          return n.v;\n        },\n        abrupt: function abrupt(r, e) {\n          return t(n.a, o[r], e);\n        },\n        delegateYield: function delegateYield(r, o, a) {\n          return e.resultName = o, t(n.d, regeneratorValues(r), a);\n        },\n        finish: function finish(r) {\n          return t(n.f, r);\n        }\n      }, t = function t(r, _t, o) {\n        n.p = e.prev, n.n = e.next;\n        try {\n          return r(_t, o);\n        } finally {\n          e.next = n.n;\n        }\n      }), e.resultName && (e[e.resultName] = n.v, e.resultName = void 0), e.sent = n.v, e.next = n.n;\n      try {\n        return r.call(this, e);\n      } finally {\n        n.p = e.prev, n.n = e.next;\n      }\n    };\n  }\n  return (module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return {\n      wrap: function wrap(e, t, n, o) {\n        return r.w(a(e), t, n, o && o.reverse());\n      },\n      isGeneratorFunction: n,\n      mark: r.m,\n      awrap: function awrap(r, e) {\n        return new OverloadYield(r, e);\n      },\n      AsyncIterator: regeneratorAsyncIterator,\n      async: function async(r, e, t, o, u) {\n        return (n(e) ? regeneratorAsyncGen : regeneratorAsync)(a(r), e, t, o, u);\n      },\n      keys: regeneratorKeys,\n      values: regeneratorValues\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction _regenerator() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */\n  var e,\n    t,\n    r = \"function\" == typeof Symbol ? Symbol : {},\n    n = r.iterator || \"@@iterator\",\n    o = r.toStringTag || \"@@toStringTag\";\n  function i(r, n, o, i) {\n    var c = n && n.prototype instanceof Generator ? n : Generator,\n      u = Object.create(c.prototype);\n    return regeneratorDefine(u, \"_invoke\", function (r, n, o) {\n      var i,\n        c,\n        u,\n        f = 0,\n        p = o || [],\n        y = !1,\n        G = {\n          p: 0,\n          n: 0,\n          v: e,\n          a: d,\n          f: d.bind(e, 4),\n          d: function d(t, r) {\n            return i = t, c = 0, u = e, G.n = r, a;\n          }\n        };\n      function d(r, n) {\n        for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) {\n          var o,\n            i = p[t],\n            d = G.p,\n            l = i[2];\n          r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0));\n        }\n        if (o || r > 1) return a;\n        throw y = !0, n;\n      }\n      return function (o, p, l) {\n        if (f > 1) throw TypeError(\"Generator is already running\");\n        for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) {\n          i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u);\n          try {\n            if (f = 2, i) {\n              if (c || (o = \"next\"), t = i[o]) {\n                if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\");\n                if (!t.done) return t;\n                u = t.value, c < 2 && (c = 0);\n              } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1);\n              i = e;\n            } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break;\n          } catch (t) {\n            i = e, c = 1, u = t;\n          } finally {\n            f = 1;\n          }\n        }\n        return {\n          value: t,\n          done: y\n        };\n      };\n    }(r, o, i), !0), u;\n  }\n  var a = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  t = Object.getPrototypeOf;\n  var c = [][n] ? t(t([][n]())) : (regeneratorDefine(t = {}, n, function () {\n      return this;\n    }), t),\n    u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c);\n  function f(e) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, regeneratorDefine(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e;\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, regeneratorDefine(u, \"constructor\", GeneratorFunctionPrototype), regeneratorDefine(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", regeneratorDefine(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), regeneratorDefine(u), regeneratorDefine(u, o, \"Generator\"), regeneratorDefine(u, n, function () {\n    return this;\n  }), regeneratorDefine(u, \"toString\", function () {\n    return \"[object Generator]\";\n  }), (module.exports = _regenerator = function _regenerator() {\n    return {\n      w: i,\n      m: f\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _OverloadYield(e, d) {\n  this.v = e, this.k = d;\n}\nmodule.exports = _OverloadYield, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var OverloadYield = require(\"./OverloadYield.js\");\nvar regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction AsyncIterator(t, e) {\n  function n(r, o, i, f) {\n    try {\n      var c = t[r](o),\n        u = c.value;\n      return u instanceof OverloadYield ? e.resolve(u.v).then(function (t) {\n        n(\"next\", t, i, f);\n      }, function (t) {\n        n(\"throw\", t, i, f);\n      }) : e.resolve(u).then(function (t) {\n        c.value = t, i(c);\n      }, function (t) {\n        return n(\"throw\", t, i, f);\n      });\n    } catch (t) {\n      f(t);\n    }\n  }\n  var r;\n  this.next || (regeneratorDefine(AsyncIterator.prototype), regeneratorDefine(AsyncIterator.prototype, \"function\" == typeof Symbol && Symbol.asyncIterator || \"@asyncIterator\", function () {\n    return this;\n  })), regeneratorDefine(this, \"_invoke\", function (t, o, i) {\n    function f() {\n      return new e(function (e, r) {\n        n(t, i, e, r);\n      });\n    }\n    return r = r ? r.then(f, f) : f();\n  }, !0);\n}\nmodule.exports = AsyncIterator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","var regenerator = require(\"./regenerator.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nfunction _regeneratorAsyncGen(r, e, t, o, n) {\n  return new regeneratorAsyncIterator(regenerator().w(r, e, t, o), n || Promise);\n}\nmodule.exports = _regeneratorAsyncGen, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorDefine(e, r, n, t) {\n  var i = Object.defineProperty;\n  try {\n    i({}, \"\", {});\n  } catch (e) {\n    i = 0;\n  }\n  module.exports = _regeneratorDefine = function regeneratorDefine(e, r, n, t) {\n    function o(r, n) {\n      _regeneratorDefine(e, r, function (e) {\n        return this._invoke(r, n, e);\n      });\n    }\n    r ? i ? i(e, r, {\n      value: n,\n      enumerable: !t,\n      configurable: !t,\n      writable: !t\n    }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2));\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _regeneratorDefine(e, r, n, t);\n}\nmodule.exports = _regeneratorDefine, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorValues(e) {\n  if (null != e) {\n    var t = e[\"function\" == typeof Symbol && Symbol.iterator || \"@@iterator\"],\n      r = 0;\n    if (t) return t.call(e);\n    if (\"function\" == typeof e.next) return e;\n    if (!isNaN(e.length)) return {\n      next: function next() {\n        return e && r >= e.length && (e = void 0), {\n          value: e && e[r++],\n          done: !e\n        };\n      }\n    };\n  }\n  throw new TypeError(_typeof(e) + \" is not iterable\");\n}\nmodule.exports = _regeneratorValues, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorKeys(e) {\n  var n = Object(e),\n    r = [];\n  for (var t in n) r.unshift(t);\n  return function e() {\n    for (; r.length;) if ((t = r.pop()) in n) return e.value = t, e.done = !1, e;\n    return e.done = !0, e;\n  };\n}\nmodule.exports = _regeneratorKeys, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nfunction _regeneratorAsync(n, e, r, t, o) {\n  var a = regeneratorAsyncGen(n, e, r, t, o);\n  return a.next().then(function (n) {\n    return n.done ? n.value : a.next();\n  });\n}\nmodule.exports = _regeneratorAsync, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class DingtalkLoginButton extends Component {\n  loading: boolean = false;\n\n  // \n  isDingtalkEnvironment(): boolean {\n    if (typeof navigator === 'undefined') return false;\n    return /DingTalk/i.test(navigator.userAgent);\n  }\n\n  view() {\n    const isDingtalkEnv = this.isDingtalkEnvironment();\n\n    return (\n      <div className=\"DingtalkLoginButton\">\n        <div className=\"DingtalkLoginButton-divider\">\n          <span>{app.translator.trans('jiushutech-dingtalk-login.forum.login.or')}</span>\n        </div>\n        <Button\n          className=\"Button Button--block DingtalkLoginButton-button\"\n          loading={this.loading}\n          onclick={this.handleClick.bind(this)}\n        >\n          <span className=\"DingtalkLoginButton-icon\">\n            <svg viewBox=\"0 0 1024 1024\" width=\"20\" height=\"20\">\n              <path d=\"M512 2C230.2 2 2 230.2 2 512s228.2 510 510 510 510-228.2 510-510S793.3 2 512 2z m235.9 442c-1 4.6-3.6 10.8-7.2 19.1l-0.5 0.5c-21.6 45.8-77.3 135.5-77.3 135.5l-0.5-0.5-16.5 28.3h78.8L574.3 826.8l34-136h-61.8l21.6-90.2c-17.5 4.1-38.1 9.8-62.3 18 0 0-33 19.1-94.8-37.1 0 0-41.7-37.1-17.5-45.8 10.3-4.1 50-8.8 81.4-12.9 42.2-5.7 68.5-8.8 68.5-8.8s-130.3 2.1-161.2-3.1c-30.9-4.6-70.1-56.7-78.3-102 0 0-12.9-24.7 27.8-12.9 40.2 11.8 209.2 45.8 209.2 45.8S321.4 375 307 358.5c-14.4-16.5-42.8-89.6-39.2-134.5 0 0 1.5-11.3 12.9-8.2 0 0 161.8 74.2 272.5 114.4C664.5 371.4 760.8 392 747.9 444z\" fill=\"#ffffff\"/>\n            </svg>\n          </span>\n          <span className=\"DingtalkLoginButton-text\">\n            {isDingtalkEnv\n              ? app.translator.trans('jiushutech-dingtalk-login.forum.login.button_h5')\n              : app.translator.trans('jiushutech-dingtalk-login.forum.login.button')}\n          </span>\n        </Button>\n      </div>\n    );\n  }\n\n  handleClick(e: Event) {\n    e.preventDefault();\n    \n    const isDingtalkEnv = this.isDingtalkEnvironment();\n    console.log('[DingTalk LoginButton] :', isDingtalkEnv);\n    \n    if (isDingtalkEnv) {\n      this.handleH5Login();\n    } else {\n      this.handleQRCodeLogin();\n    }\n  }\n\n  handleQRCodeLogin() {\n    console.log('[DingTalk LoginButton] ');\n    // \n    const width = 500;\n    const height = 600;\n    const left = (window.screen.width - width) / 2;\n    const top = (window.screen.height - height) / 2;\n    \n    const authUrl = app.forum.attribute('baseUrl') + '/auth/dingtalk';\n    console.log('[DingTalk LoginButton] URL:', authUrl);\n    \n    const popup = window.open(\n      authUrl,\n      'dingtalk_login',\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`\n    );\n\n    // \n    const checkClosed = setInterval(() => {\n      if (popup && popup.closed) {\n        clearInterval(checkClosed);\n        // \n        app.modal.close();\n        window.location.reload();\n      }\n    }, 500);\n  }\n\n  async handleH5Login() {\n    console.log('[DingTalk LoginButton] H5');\n    this.loading = true;\n    m.redraw();\n\n    try {\n      // JSAPI\n      if (typeof (window as any).dd === 'undefined') {\n        console.log('[DingTalk LoginButton] JSAPI...');\n        // JSAPI\n        await this.loadDingtalkJSAPI();\n      }\n\n      const dd = (window as any).dd;\n      const corpId = app.forum.attribute('dingtalkCorpId');\n      console.log('[DingTalk LoginButton] CorpId:', corpId);\n\n      if (!corpId) {\n        console.error('[DingTalk LoginButton] CorpId');\n        this.loading = false;\n        m.redraw();\n        app.alerts.show({ type: 'error' }, 'CorpId');\n        return;\n      }\n\n      dd.ready(() => {\n        console.log('[DingTalk LoginButton] JSAPI...');\n        dd.runtime.permission.requestAuthCode({\n          corpId: corpId,\n          onSuccess: async (result: { code: string }) => {\n            console.log('[DingTalk LoginButton] ');\n            try {\n              const response = await app.request({\n                method: 'POST',\n                url: app.forum.attribute('apiUrl') + '/dingtalk/h5-login',\n                body: { code: result.code },\n              });\n\n              if (response.success) {\n                console.log('[DingTalk LoginButton] ');\n                // \n                app.modal.close();\n                window.location.reload();\n              } else {\n                console.error('[DingTalk LoginButton] :', response.message);\n                app.alerts.show({ type: 'error' }, response.message || '');\n              }\n            } catch (error: any) {\n              console.error('[DingTalk LoginButton] :', error);\n              app.alerts.show({ type: 'error' }, error.message || '');\n            } finally {\n              this.loading = false;\n              m.redraw();\n            }\n          },\n          onFail: (err: any) => {\n            console.error('[DingTalk LoginButton] :', err);\n            this.loading = false;\n            m.redraw();\n            app.alerts.show({ type: 'error' }, '' + (err.message || JSON.stringify(err)));\n          },\n        });\n      });\n\n      dd.error((err: any) => {\n        console.error('[DingTalk LoginButton] JSAPI:', err);\n        this.loading = false;\n        m.redraw();\n        app.alerts.show({ type: 'error' }, 'JSAPI' + (err.message || JSON.stringify(err)));\n      });\n    } catch (error: any) {\n      console.error('[DingTalk LoginButton] :', error);\n      this.loading = false;\n      m.redraw();\n      app.alerts.show({ type: 'error' }, error.message || '');\n    }\n  }\n\n  loadDingtalkJSAPI(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // \n      if (typeof (window as any).dd !== 'undefined') {\n        console.log('[DingTalk LoginButton] JSAPI');\n        resolve();\n        return;\n      }\n\n      console.log('[DingTalk LoginButton] JSAPI...');\n      const script = document.createElement('script');\n      script.src = 'https://g.alicdn.com/dingding/dingtalk-jsapi/3.0.12/dingtalk.open.js';\n      script.onload = () => {\n        console.log('[DingTalk LoginButton] JSAPI');\n        resolve();\n      };\n      script.onerror = () => {\n        console.error('[DingTalk LoginButton] JSAPI');\n        reject(new Error('Failed to load DingTalk JSAPI'));\n      };\n      document.head.appendChild(script);\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class DingtalkBindButton extends Component {\n  loading: boolean = false;\n  checking: boolean = true;\n  bound: boolean = false;\n  dingtalkNickname: string = '';\n  dingtalkAvatar: string = '';\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n    this.checkBindStatus();\n  }\n\n  async checkBindStatus() {\n    this.checking = true;\n    m.redraw();\n\n    try {\n      const response = await app.request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/bind-status',\n      });\n\n      this.bound = response.bound;\n      this.dingtalkNickname = response.dingtalk_nickname || '';\n      this.dingtalkAvatar = response.dingtalk_avatar || '';\n    } catch (error) {\n      console.error('Failed to check bind status:', error);\n      this.bound = false;\n    } finally {\n      this.checking = false;\n      m.redraw();\n    }\n  }\n\n  view() {\n    if (this.checking) {\n      return (\n        <div className=\"DingtalkBindButton\">\n          <div className=\"DingtalkBindButton-loading\">\n            <LoadingIndicator size=\"small\" />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"DingtalkBindButton\">\n        <div className=\"DingtalkBindButton-content\">\n          {this.bound ? this.renderBoundCard() : this.renderUnboundCard()}\n        </div>\n      </div>\n    );\n  }\n\n  renderBoundCard() {\n    return (\n      <div className=\"DingtalkBindButton-card DingtalkBindButton-card--bound DingtalkBindButton-card--vertical\">\n        <div className=\"DingtalkBindButton-avatar\">\n          {this.dingtalkAvatar ? (\n            <img src={this.dingtalkAvatar} alt=\"\" />\n          ) : (\n            <i className=\"fas fa-user\"></i>\n          )}\n        </div>\n        <div className=\"DingtalkBindButton-info\">\n          <div className=\"DingtalkBindButton-nickname\">\n            {this.dingtalkNickname || ''}\n          </div>\n          <div className=\"DingtalkBindButton-statusText\">\n            <i className=\"fas fa-check-circle\"></i>\n            {app.translator.trans('jiushutech-dingtalk-login.forum.settings.bound')}\n          </div>\n        </div>\n        <div className=\"DingtalkBindButton-cardActions\">\n          <Button\n            className=\"Button Button--danger Button--small\"\n            loading={this.loading}\n            onclick={this.handleUnbind.bind(this)}\n          >\n            <i className=\"fas fa-unlink\"></i>\n            {app.translator.trans('jiushutech-dingtalk-login.forum.settings.unbind')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  renderUnboundCard() {\n    return (\n      <div className=\"DingtalkBindButton-card DingtalkBindButton-card--unbound DingtalkBindButton-card--vertical\">\n        <div className=\"DingtalkBindButton-avatar DingtalkBindButton-avatar--empty\">\n          <i className=\"fas fa-comment-dots\"></i>\n        </div>\n        <div className=\"DingtalkBindButton-info\">\n          <div className=\"DingtalkBindButton-nickname\">\n            {app.translator.trans('jiushutech-dingtalk-login.forum.settings.not_bound')}\n          </div>\n          <div className=\"DingtalkBindButton-statusText DingtalkBindButton-statusText--warning\">\n            <i className=\"fas fa-exclamation-circle\"></i>\n            {app.translator.trans('jiushutech-dingtalk-login.forum.settings.bind_hint')}\n          </div>\n        </div>\n        <div className=\"DingtalkBindButton-cardActions\">\n          <Button\n            className=\"Button Button--primary\"\n            icon=\"fas fa-link\"\n            loading={this.loading}\n            onclick={this.handleBind.bind(this)}\n          >\n            {app.translator.trans('jiushutech-dingtalk-login.forum.settings.bind')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  handleBind(e: Event) {\n    e.preventDefault();\n    \n    const isDingtalkEnv = /DingTalk/i.test(navigator.userAgent);\n    \n    if (isDingtalkEnv) {\n      this.handleH5Bind();\n    } else {\n      this.handleQRCodeBind();\n    }\n  }\n\n  handleQRCodeBind() {\n    const width = 500;\n    const height = 600;\n    const left = (window.screen.width - width) / 2;\n    const top = (window.screen.height - height) / 2;\n    \n    const authUrl = app.forum.attribute('baseUrl') + '/auth/dingtalk?bind=1';\n    \n    const popup = window.open(\n      authUrl,\n      'dingtalk_bind',\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`\n    );\n\n    // \n    const checkClosed = setInterval(() => {\n      if (popup?.closed) {\n        clearInterval(checkClosed);\n        // \n        app.modal.close();\n        window.location.reload();\n      }\n    }, 500);\n  }\n\n  async handleH5Bind() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      if (typeof (window as any).dd === 'undefined') {\n        await this.loadDingtalkJSAPI();\n      }\n\n      const dd = (window as any).dd;\n      const corpId = app.forum.attribute('dingtalkCorpId');\n\n      dd.ready(() => {\n        dd.runtime.permission.requestAuthCode({\n          corpId: corpId,\n          onSuccess: async (result: { code: string }) => {\n            await this.submitBindCode(result.code, 'h5');\n          },\n          onFail: (err: any) => {\n            this.loading = false;\n            m.redraw();\n            app.alerts.show({ type: 'error' }, '');\n          },\n        });\n      });\n    } catch (error: any) {\n      this.loading = false;\n      m.redraw();\n      app.alerts.show({ type: 'error' }, error.message || '');\n    }\n  }\n\n  async submitBindCode(code: string, type: string) {\n    try {\n      const response = await app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/bind',\n        body: { code, type },\n      });\n\n      if (response.success) {\n        app.alerts.show({ type: 'success' }, app.translator.trans('jiushutech-dingtalk-login.forum.settings.bind_success'));\n        // \n        app.modal.close();\n        window.location.reload();\n      } else {\n        app.alerts.show({ type: 'error' }, response.message || '');\n      }\n    } catch (error: any) {\n      app.alerts.show({ type: 'error' }, error.message || '');\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async handleUnbind(e: Event) {\n    e.preventDefault();\n    \n    if (!confirm(app.translator.trans('jiushutech-dingtalk-login.forum.settings.unbind_confirm') as string)) {\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    try {\n      const response = await app.request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/unbind',\n      });\n\n      if (response.success) {\n        this.bound = false;\n        this.dingtalkNickname = '';\n        this.dingtalkAvatar = '';\n        app.alerts.show({ type: 'success' }, app.translator.trans('jiushutech-dingtalk-login.forum.settings.unbind_success'));\n      } else {\n        app.alerts.show({ type: 'error' }, response.message || '');\n      }\n    } catch (error: any) {\n      app.alerts.show({ type: 'error' }, error.message || '');\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  loadDingtalkJSAPI(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://g.alicdn.com/dingding/dingtalk-jsapi/3.0.12/dingtalk.open.js';\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load DingTalk JSAPI'));\n      document.head.appendChild(script);\n    });\n  }\n}\n","import app from 'flarum/forum/app';\n\nexport default class DingtalkH5Auth {\n  static async autoLogin() {\n    console.log('[DingTalk H5Auth] ...');\n    \n    // \n    if (!/DingTalk/i.test(navigator.userAgent)) {\n      console.log('[DingTalk H5Auth] ');\n      return;\n    }\n\n    // \n    if (app.session.user) {\n      console.log('[DingTalk H5Auth] ');\n      return;\n    }\n\n    // H5 - \n    const h5Enabled = app.forum.attribute('dingtalkH5Enabled');\n    console.log('[DingTalk H5Auth] H5:', h5Enabled);\n    \n    if (h5Enabled === false) {\n      console.log('[DingTalk H5Auth] H5');\n      return;\n    }\n\n    try {\n      // JSAPI\n      console.log('[DingTalk H5Auth] JSAPI...');\n      await this.loadDingtalkJSAPI();\n\n      const dd = (window as any).dd;\n      const corpId = app.forum.attribute('dingtalkCorpId');\n\n      console.log('[DingTalk H5Auth] CorpId:', corpId);\n\n      if (!corpId) {\n        console.warn('[DingTalk H5Auth] CorpId');\n        return;\n      }\n\n      dd.ready(() => {\n        console.log('[DingTalk H5Auth] JSAPI...');\n        dd.runtime.permission.requestAuthCode({\n          corpId: corpId,\n          onSuccess: async (result: { code: string }) => {\n            console.log('[DingTalk H5Auth] ');\n            try {\n              const response = await app.request({\n                method: 'POST',\n                url: app.forum.attribute('apiUrl') + '/dingtalk/h5-login',\n                body: { code: result.code },\n                errorHandler: () => {}, // \n              });\n\n              if (response.success) {\n                console.log('[DingTalk H5Auth] ');\n                window.location.reload();\n              } else {\n                console.error('[DingTalk H5Auth] :', response.message);\n                // \n                this.showErrorAlert(response.message || app.translator.trans('jiushutech-dingtalk-login.forum.errors.auth_failed'));\n              }\n            } catch (error: any) {\n              console.error('[DingTalk H5Auth] :', error);\n              // \n              let errorMessage = app.translator.trans('jiushutech-dingtalk-login.forum.errors.auth_failed');\n              if (error.responseJSON && error.responseJSON.message) {\n                errorMessage = error.responseJSON.message;\n              } else if (error.response && error.response.message) {\n                errorMessage = error.response.message;\n              } else if (error.message) {\n                errorMessage = error.message;\n              }\n              // \n              this.showErrorAlert(errorMessage);\n            }\n          },\n          onFail: (err: any) => {\n            console.error('[DingTalk H5Auth] :', err);\n            this.showErrorAlert(app.translator.trans('jiushutech-dingtalk-login.forum.errors.auth_failed') + ': ' + (err.message || JSON.stringify(err)));\n          },\n        });\n      });\n\n      dd.error((err: any) => {\n        console.error('[DingTalk H5Auth] JSAPI:', err);\n        this.showErrorAlert(app.translator.trans('jiushutech-dingtalk-login.forum.errors.auth_failed') + ': ' + (err.message || JSON.stringify(err)));\n      });\n    } catch (error: any) {\n      console.error('[DingTalk H5Auth] :', error);\n      this.showErrorAlert(error.message || app.translator.trans('jiushutech-dingtalk-login.forum.errors.auth_failed'));\n    }\n  }\n\n  /**\n   * \n   */\n  static showErrorAlert(message: string) {\n    //  Flarum  alerts \n    app.alerts.show(\n      { type: 'error' },\n      message\n    );\n  }\n\n  static loadDingtalkJSAPI(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // \n      if (typeof (window as any).dd !== 'undefined') {\n        console.log('[DingTalk H5Auth] JSAPI');\n        resolve();\n        return;\n      }\n\n      console.log('[DingTalk H5Auth] JSAPI...');\n      const script = document.createElement('script');\n      script.src = 'https://g.alicdn.com/dingding/dingtalk-jsapi/3.0.12/dingtalk.open.js';\n      script.onload = () => {\n        console.log('[DingTalk H5Auth] JSAPI');\n        resolve();\n      };\n      script.onerror = () => {\n        console.error('[DingTalk H5Auth] JSAPI');\n        reject(new Error('Failed to load DingTalk JSAPI'));\n      };\n      document.head.appendChild(script);\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class DingtalkBindRequiredModal extends Modal {\n  loading: boolean = false;\n\n  className() {\n    return 'DingtalkBindRequiredModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('jiushutech-dingtalk-login.forum.bind_required.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"DingtalkBindRequired-content\">\n          <div className=\"DingtalkBindRequired-icon\">\n            <i className=\"fas fa-link\"></i>\n          </div>\n          <p className=\"DingtalkBindRequired-message\">\n            {app.translator.trans('jiushutech-dingtalk-login.forum.bind_required.message')}\n          </p>\n          <Button\n            className=\"Button Button--primary Button--block\"\n            onclick={this.handleBind.bind(this)}\n            loading={this.loading}\n          >\n            {app.translator.trans('jiushutech-dingtalk-login.forum.bind_required.button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  handleBind() {\n    const isDingtalkEnv = /DingTalk/i.test(navigator.userAgent);\n    \n    if (isDingtalkEnv) {\n      this.handleH5Bind();\n    } else {\n      this.handleQRCodeBind();\n    }\n  }\n\n  handleQRCodeBind() {\n    const width = 500;\n    const height = 600;\n    const left = (window.screen.width - width) / 2;\n    const top = (window.screen.height - height) / 2;\n    \n    const authUrl = app.forum.attribute('baseUrl') + '/auth/dingtalk?bind=1';\n    \n    const popup = window.open(\n      authUrl,\n      'dingtalk_bind',\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`\n    );\n\n    // \n    const checkClosed = setInterval(() => {\n      if (popup?.closed) {\n        clearInterval(checkClosed);\n        // \n        window.location.reload();\n      }\n    }, 500);\n  }\n\n  async handleH5Bind() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      if (typeof (window as any).dd === 'undefined') {\n        await this.loadDingtalkJSAPI();\n      }\n\n      const dd = (window as any).dd;\n      const corpId = app.forum.attribute('dingtalkCorpId');\n\n      dd.ready(() => {\n        dd.runtime.permission.requestAuthCode({\n          corpId: corpId,\n          onSuccess: async (result: { code: string }) => {\n            await this.submitBindCode(result.code);\n          },\n          onFail: (err: any) => {\n            this.loading = false;\n            m.redraw();\n            app.alerts.show({ type: 'error' }, '');\n          },\n        });\n      });\n    } catch (error: any) {\n      this.loading = false;\n      m.redraw();\n      app.alerts.show({ type: 'error' }, error.message || '');\n    }\n  }\n\n  async submitBindCode(code: string) {\n    try {\n      const response = await app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/bind',\n        body: { code, type: 'h5' },\n      });\n\n      if (response.success) {\n        app.alerts.show({ type: 'success' }, app.translator.trans('jiushutech-dingtalk-login.forum.settings.bind_success'));\n        this.hide();\n        window.location.reload();\n      } else {\n        app.alerts.show({ type: 'error' }, response.message || '');\n      }\n    } catch (error: any) {\n      app.alerts.show({ type: 'error' }, error.message || '');\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  loadDingtalkJSAPI(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://g.alicdn.com/dingding/dingtalk-jsapi/3.0.12/dingtalk.open.js';\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load DingTalk JSAPI'));\n      document.head.appendChild(script);\n    });\n  }\n\n  // \n  isDismissible() {\n    return false;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Button from 'flarum/common/components/Button';\nimport humanTime from 'flarum/common/helpers/humanTime';\n\ninterface DingtalkIndexCardAttrs {\n  user: any;\n}\n\nexport default class DingtalkIndexCard extends Component<DingtalkIndexCardAttrs> {\n  loading: boolean = true;\n  bound: boolean = false;\n  dingtalkNickname: string = '';\n  dingtalkAvatar: string = '';\n  dingtalkMobile: string = '';\n  dingtalkEmail: string = '';\n  loginTime: Date | null = null;\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n    this.loadBindStatus();\n  }\n\n  async loadBindStatus() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      const response = await app.request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/bind-status',\n      });\n\n      this.bound = response.bound;\n      this.dingtalkNickname = response.dingtalk_nickname || '';\n      this.dingtalkAvatar = response.dingtalk_avatar || '';\n      this.dingtalkMobile = response.dingtalk_mobile || '';\n      this.dingtalkEmail = response.dingtalk_email || '';\n      \n      // \n      const user = this.attrs.user;\n      if (user && user.lastSeenAt) {\n        this.loginTime = user.lastSeenAt();\n      }\n    } catch (error) {\n      console.error('Failed to load dingtalk bind status:', error);\n      this.bound = false;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  view() {\n    if (this.loading) {\n      return (\n        <div className=\"DingtalkIndexCard\">\n          <div className=\"DingtalkIndexCard-loading\">\n            <LoadingIndicator size=\"small\" />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"DingtalkIndexCard\">\n        <div className=\"DingtalkIndexCard-header\">\n          <span className=\"DingtalkIndexCard-title\">\n            {app.translator.trans('jiushutech-dingtalk-login.forum.user_card.title')}\n          </span>\n        </div>\n        <div className=\"DingtalkIndexCard-content\">\n          {this.bound ? this.renderBoundContent() : this.renderUnboundContent()}\n        </div>\n      </div>\n    );\n  }\n\n  renderBoundContent() {\n    const user = this.attrs.user;\n    \n    return (\n      <div className=\"DingtalkIndexCard-bound\">\n        <div className=\"DingtalkIndexCard-user\">\n          <div className=\"DingtalkIndexCard-avatar\">\n            {this.dingtalkAvatar ? (\n              <img src={this.dingtalkAvatar} alt=\"\" />\n            ) : (\n              <span className=\"Avatar\" style={{ '--avatar-bg': '#007FFF' }}>\n                {this.dingtalkNickname ? this.dingtalkNickname.charAt(0).toUpperCase() : '?'}\n              </span>\n            )}\n          </div>\n          <div className=\"DingtalkIndexCard-info\">\n            <div className=\"DingtalkIndexCard-nickname\">\n              {this.dingtalkNickname || app.translator.trans('jiushutech-dingtalk-login.forum.user_card.dingtalk_user')}\n            </div>\n            <div className=\"DingtalkIndexCard-status\">\n              <span className=\"DingtalkIndexCard-badge DingtalkIndexCard-badge--bound\">\n                <i className=\"fas fa-check-circle\"></i>\n                {app.translator.trans('jiushutech-dingtalk-login.forum.user_card.bound')}\n              </span>\n            </div>\n          </div>\n        </div>\n        \n        <ul className=\"DingtalkIndexCard-details\">\n          {/* \n          {this.dingtalkMobile && (\n            <li>\n              <i className=\"fas fa-phone icon\"></i>\n              <span>{this.maskMobile(this.dingtalkMobile)}</span>\n            </li>\n          )}\n          {this.dingtalkEmail && (\n            <li>\n              <i className=\"fas fa-envelope icon\"></i>\n              <span>{this.maskEmail(this.dingtalkEmail)}</span>\n            </li>\n          )}\n          */}\n          {user && user.lastSeenAt && user.lastSeenAt() && (\n            <li>\n              <i className=\"fas fa-clock icon\"></i>\n              <span>\n                {app.translator.trans('jiushutech-dingtalk-login.forum.user_card.online_since')}\n                {humanTime(user.lastSeenAt())}\n              </span>\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  }\n\n  renderUnboundContent() {\n    return (\n      <div className=\"DingtalkIndexCard-unbound\">\n        <div className=\"DingtalkIndexCard-unboundMessage\">\n          <i className=\"fas fa-link\"></i>\n          <span>{app.translator.trans('jiushutech-dingtalk-login.forum.user_card.not_bound')}</span>\n        </div>\n        <Button\n          className=\"Button Button--primary Button--block\"\n          onclick={this.handleBind.bind(this)}\n        >\n          {app.translator.trans('jiushutech-dingtalk-login.forum.user_card.bind_now')}\n        </Button>\n      </div>\n    );\n  }\n\n  maskMobile(mobile: string): string {\n    if (mobile.length >= 7) {\n      return mobile.substring(0, 3) + '****' + mobile.substring(mobile.length - 4);\n    }\n    return mobile;\n  }\n\n  maskEmail(email: string): string {\n    const atIndex = email.indexOf('@');\n    if (atIndex > 2) {\n      return email.substring(0, 2) + '***' + email.substring(atIndex);\n    } else if (atIndex > 0) {\n      return email.charAt(0) + '***' + email.substring(atIndex);\n    }\n    return email;\n  }\n\n  handleBind() {\n    const isDingtalkEnv = /DingTalk/i.test(navigator.userAgent);\n    \n    if (isDingtalkEnv) {\n      this.handleH5Bind();\n    } else {\n      this.handleQRCodeBind();\n    }\n  }\n\n  handleQRCodeBind() {\n    const width = 500;\n    const height = 600;\n    const left = (window.screen.width - width) / 2;\n    const top = (window.screen.height - height) / 2;\n    \n    const authUrl = app.forum.attribute('baseUrl') + '/auth/dingtalk?bind=1';\n    \n    const popup = window.open(\n      authUrl,\n      'dingtalk_bind',\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`\n    );\n\n    const checkClosed = setInterval(() => {\n      if (popup?.closed) {\n        clearInterval(checkClosed);\n        this.loadBindStatus();\n      }\n    }, 500);\n  }\n\n  async handleH5Bind() {\n    try {\n      if (typeof (window as any).dd === 'undefined') {\n        await this.loadDingtalkJSAPI();\n      }\n\n      const dd = (window as any).dd;\n      const corpId = app.forum.attribute('dingtalkCorpId');\n\n      dd.ready(() => {\n        dd.runtime.permission.requestAuthCode({\n          corpId: corpId,\n          onSuccess: async (result: { code: string }) => {\n            await this.submitBindCode(result.code);\n          },\n          onFail: (err: any) => {\n            app.alerts.show({ type: 'error' }, '');\n          },\n        });\n      });\n    } catch (error: any) {\n      app.alerts.show({ type: 'error' }, error.message || '');\n    }\n  }\n\n  async submitBindCode(code: string) {\n    try {\n      const response = await app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/dingtalk/bind',\n        body: { code, type: 'h5' },\n      });\n\n      if (response.success) {\n        app.alerts.show({ type: 'success' }, app.translator.trans('jiushutech-dingtalk-login.forum.settings.bind_success'));\n        this.loadBindStatus();\n      } else {\n        app.alerts.show({ type: 'error' }, response.message || '');\n      }\n    } catch (error: any) {\n      app.alerts.show({ type: 'error' }, error.message || '');\n    }\n  }\n\n  loadDingtalkJSAPI(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://g.alicdn.com/dingding/dingtalk-jsapi/3.0.12/dingtalk.open.js';\n      script.onload = () => resolve();\n      script.onerror = () => reject(new Error('Failed to load DingTalk JSAPI'));\n      document.head.appendChild(script);\n    });\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport DingtalkLoginButton from './src/forum/components/DingtalkLoginButton';\nimport DingtalkBindButton from './src/forum/components/DingtalkBindButton';\nimport DingtalkH5Auth from './src/forum/components/DingtalkH5Auth';\nimport DingtalkBindRequiredModal from './src/forum/components/DingtalkBindRequiredModal';\nimport DingtalkIndexCard from './src/forum/components/DingtalkIndexCard';\n\n// \nfunction isDingtalkEnvironment(): boolean {\n  if (typeof navigator === 'undefined') return false;\n  return /DingTalk/i.test(navigator.userAgent);\n}\n\n// \nasync function checkDingtalkBindingRequired() {\n  // \n  if (!app.session.user) {\n    return;\n  }\n\n  // \n  if (!app.forum.attribute('dingtalkForceBind')) {\n    return;\n  }\n\n  // \n  if (!app.forum.attribute('dingtalkLoginEnabled')) {\n    return;\n  }\n\n  try {\n    // \n    const response = await app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/dingtalk/bind-status',\n    });\n\n    if (!response.bound) {\n      // \n      app.modal.show(DingtalkBindRequiredModal);\n    }\n  } catch (error: any) {\n    // API403\n    if (error.status === 403) {\n      app.modal.show(DingtalkBindRequiredModal);\n    }\n  }\n}\n\n// H5\nfunction initH5AutoLogin() {\n  try {\n    const isDingtalkEnv = isDingtalkEnvironment();\n    \n    // H5H5\n    if (isDingtalkEnv && app.forum.attribute('dingtalkH5Enabled') && !app.session.user) {\n      console.log('[DingTalk Login] H5');\n      DingtalkH5Auth.autoLogin();\n    }\n  } catch (error) {\n    console.error('[DingTalk Login] H5:', error);\n  }\n}\n\n// \nfunction initForceBindCheck() {\n  setTimeout(() => {\n    try {\n      checkDingtalkBindingRequired();\n    } catch (error) {\n      console.error('[DingTalk Login] :', error);\n    }\n  }, 500);\n}\n\napp.initializers.add('jiushutech-dingtalk-login', () => {\n  try {\n    //  document.addEventListener  DOM \n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => {\n        initH5AutoLogin();\n        initForceBindCheck();\n      });\n    } else {\n      // DOM \n      initH5AutoLogin();\n      initForceBindCheck();\n    }\n\n    // \n    extend(LogInModal.prototype, 'fields', function (items: ItemList<any>) {\n      // \n      const showLoginButton = app.forum.attribute('dingtalkShowLoginButton');\n      const dingtalkLoginEnabled = app.forum.attribute('dingtalkLoginEnabled');\n      const isDingtalkEnv = isDingtalkEnvironment();\n      \n      console.log('[DingTalk Login] showLoginButton:', showLoginButton, 'dingtalkLoginEnabled:', dingtalkLoginEnabled, 'isDingtalkEnv:', isDingtalkEnv);\n      \n      // \n      if (showLoginButton === false || showLoginButton === '0') {\n        if (!isDingtalkEnv) {\n          console.log('[DingTalk Login] ');\n          return;\n        }\n      }\n      \n      // \n      if (!dingtalkLoginEnabled && !isDingtalkEnv) {\n        console.log('[DingTalk Login] ');\n        return;\n      }\n\n      // \n      if (app.forum.attribute('dingtalkOnlyLogin') === true) {\n        items.remove('identification');\n        items.remove('password');\n        items.remove('remember');\n        items.remove('submit');\n      }\n\n      items.add(\n        'dingtalk-login',\n        m(DingtalkLoginButton),\n        -10\n      );\n    });\n\n    // \n    extend(SignUpModal.prototype, 'fields', function (items: ItemList<any>) {\n      // \n      const showLoginButton = app.forum.attribute('dingtalkShowLoginButton');\n      const dingtalkLoginEnabled = app.forum.attribute('dingtalkLoginEnabled');\n      const isDingtalkEnv = isDingtalkEnvironment();\n      \n      // \n      if (showLoginButton === false || showLoginButton === '0') {\n        if (!isDingtalkEnv) {\n          return;\n        }\n      }\n      \n      // \n      if (!dingtalkLoginEnabled && !isDingtalkEnv) {\n        return;\n      }\n\n      // \n      if (app.forum.attribute('dingtalkOnlyLogin') === true) {\n        items.remove('username');\n        items.remove('email');\n        items.remove('password');\n        items.remove('submit');\n      }\n\n      items.add(\n        'dingtalk-login',\n        m(DingtalkLoginButton),\n        -10\n      );\n    });\n\n    // \n    extend(SettingsPage.prototype, 'settingsItems', function (items: ItemList<any>) {\n      if (!app.forum.attribute('dingtalkLoginEnabled')) {\n        return;\n      }\n\n      // \n      const dingtalkSection = m('div.Settings-section.DingtalkSettings-section', [\n        m('h3.Settings-heading', app.translator.trans('jiushutech-dingtalk-login.forum.settings.title')),\n        m(DingtalkBindButton)\n      ]);\n\n      //  80 70\n      items.add(\n        'dingtalk-bind',\n        dingtalkSection,\n        80\n      );\n    });\n\n    // \n    extend(IndexPage.prototype, 'sidebarItems', function (items: ItemList<any>) {\n      if (!app.forum.attribute('dingtalkLoginEnabled')) {\n        return;\n      }\n\n      // \n      if (!app.forum.attribute('dingtalkShowOnIndex')) {\n        return;\n      }\n\n      // \n      if (!app.session.user) {\n        return;\n      }\n\n      items.add(\n        'dingtalk-card',\n        m(DingtalkIndexCard, { user: app.session.user }),\n        -10\n      );\n    });\n  } catch (error) {\n    console.error('[DingTalk Login] :', error);\n  }\n});\n"],"names":["OverloadYield","require","regenerator","regeneratorAsync","regeneratorAsyncGen","regeneratorAsyncIterator","regeneratorKeys","regeneratorValues","_regeneratorRuntime","r","e","m","t","Object","getPrototypeOf","__proto__","constructor","n","displayName","name","o","a","stop","v","abrupt","delegateYield","resultName","d","finish","f","_t","p","prev","next","sent","call","this","module","exports","wrap","w","reverse","isGeneratorFunction","mark","awrap","AsyncIterator","async","u","keys","values","__esModule","regeneratorDefine","_regenerator","Symbol","iterator","toStringTag","i","c","prototype","Generator","create","y","G","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","setPrototypeOf","k","resolve","then","asyncIterator","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","Promise","_regeneratorDefine","defineProperty","_invoke","enumerable","configurable","writable","_typeof","isNaN","unshift","pop","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","hasOwnProperty","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","flarum","core","compat","_setPrototypeOf","_inheritsLoose","DingtalkLoginButton","_Component","_this","_len","args","Array","_key","concat","loading","_proto","isDingtalkEnvironment","navigator","test","userAgent","view","isDingtalkEnv","className","app","trans","Button","onclick","handleClick","viewBox","width","height","fill","preventDefault","console","log","handleH5Login","handleQRCodeLogin","left","window","screen","top","authUrl","attribute","popup","open","checkClosed","setInterval","closed","clearInterval","close","location","reload","_handleH5Login","_callee2","dd","corpId","_t2","_this2","_context2","redraw","loadDingtalkJSAPI","error","show","type","ready","_onSuccess","permission","requestAuthCode","onSuccess","_callee","result","response","_context","method","url","body","code","success","message","_x","onFail","err","JSON","stringify","reject","script","document","createElement","src","onload","onerror","Error","head","appendChild","Component","DingtalkBindButton","checking","bound","dingtalkNickname","dingtalkAvatar","oninit","vnode","checkBindStatus","_checkBindStatus","dingtalk_nickname","dingtalk_avatar","LoadingIndicator","size","renderBoundCard","renderUnboundCard","alt","handleUnbind","icon","handleBind","handleH5Bind","handleQRCodeBind","_handleH5Bind","_callee3","_context3","submitBindCode","_submitBindCode","_callee4","_t3","_context4","_x2","_x3","_handleUnbind","_callee5","_t4","_context5","confirm","_x4","DingtalkH5Auth","autoLogin","_autoLogin","h5Enabled","user","warn","errorMessage","errorHandler","showErrorAlert","responseJSON","DingtalkBindRequiredModal","_Modal","title","content","hide","isDismissible","Modal","DingtalkIndexCard","dingtalkMobile","dingtalkEmail","loginTime","loadBindStatus","_loadBindStatus","dingtalk_mobile","dingtalk_email","attrs","lastSeenAt","renderBoundContent","renderUnboundContent","style","charAt","toUpperCase","humanTime","maskMobile","mobile","substring","maskEmail","email","atIndex","indexOf","_this3","_checkDingtalkBindingRequired","status","initH5AutoLogin","initForceBindCheck","setTimeout","checkDingtalkBindingRequired","add","readyState","addEventListener","extend","LogInModal","items","showLoginButton","dingtalkLoginEnabled","remove","SignUpModal","SettingsPage","dingtalkSection","IndexPage"],"ignoreList":[],"sourceRoot":""}